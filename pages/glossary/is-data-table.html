<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
  <!--<![endif]-->

  <head>
    <!-- Resolve Page Title -->
    
    <title>Identifying Data Tables Auto WCAG Rules</title>
    <!-- Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <meta
      name="description"
      content="Accessibility conformance testing rules for HTML.
"
    />
    <meta name="author" content="" />
    <!-- TODO:FAVICON after branding -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"
      rel="stylesheet"
      type="text/css"
    />
    <!-- CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.1.0/css/all.css"
      integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css"
    />
    <link
      rel="stylesheet"
      href="/assets/css/main.css"
    />
    <link
      rel="canonical"
      href="/pages/glossary/is-data-table.html"
    />

    <!-- Javascript -->
    <script
      type="text/javascript"
      src="//code.jquery.com/jquery-1.12.4.min.js"
      integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/native-promise-only/0.8.1/npo.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/jsonld/0.4.12/jsonld.min.js"
    ></script>
    <script
      type="text/javascript"
      src="/assets/js/jquery.stickyelement.js"
    ></script>
    <script
      type="text/javascript"
      src="/assets/js/default.js"
    ></script>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="page-wrapper">
      <!-- Fixed navbar -->
      <nav class="navbar navbar-default">
        <div class="container">
          <div class="navbar-header">
            <button
              type="button"
              class="navbar-toggle collapsed"
              data-toggle="collapse"
              data-target="#navbar"
              aria-expanded="false"
              aria-controls="navbar"
            >
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
              Auto WCAG Rules
            </a>
          </div>
          <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav mr-auto">
              <!-- Rules -->
              <li>
                <a href="/pages/rules.html"
                  >Rules</a
                >
              </li>

              <!-- Glossary -->
              <li>
                <a href="/pages/glossary/"
                  >Glossary</a
                >
              </li>

             

            <!-- Implementations -->
            <li class="dropdown">
                <a href="#"
                  class="dropdown-toggle"
                  data-toggle="dropdown"
                  role="button"
                  aria-haspopup="true"
                  aria-expanded="false">
                  Implementations <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a href="/pages/implementations/overview.html">
                      Overview
                    </a>
                  </li>
                  <li>
                    <a href="/pages/implementations/coverage.html">
                      Coverage
                    </a>
                  </li>
                </ul>
              </li>

              <!-- Rule Creation -->
              <li class="dropdown">
                <a
                  href="#"
                  class="dropdown-toggle"
                  data-toggle="dropdown"
                  role="button"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  Rule Creation <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a
                      href="/pages/design/rule-design.html"
                    >
                      Rule design
                    </a>
                  </li>
                  <li>
                    <a
                      href="/pages/design/review.html"
                    >
                      Review process
                    </a>
                  </li>
                  <li>
                    <a
                      href="/pages/design/rule-template.html"
                    >
                      Rule template
                    </a>
                  </li>
                  <li>
                    <a
                      href="/pages/design/style-guide.html"
                    >
                      Style guide
                    </a>
                  </li>
                </ul>
              </li>

              <!-- Rule Structure -->
              <li class="dropdown">
                <a
                  href="#"
                  class="dropdown-toggle"
                  data-toggle="dropdown"
                  role="button"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  Rule Structure <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a
                      href="/pages/structure/terminology.html"
                      >Terminology</a
                    >
                  </li>
                  <li>
                    <a
                      href="/pages/structure/test-modes.html"
                      >Test modes</a
                    >
                  </li>
                  <li>
                    <a
                      href="/pages/structure/aggregation.html"
                      >Result aggregation</a
                    >
                  </li>
                  <li>
                    <a
                      href="/pages/structure/accessibility-support.html"
                      >Accessibility support</a
                    >
                  </li>
                </ul>
              </li>

               <!-- Contribute -->
               <li>
                <a href="https://github.com/auto-wcag/auto-wcag/">Contribute</a>
              </li>

              <!-- About Us -->
              <li>
                <a href="/pages/about.html"
                  >About Us</a
                >
              </li>
            </ul>

            <ul class="nav navbar-nav right">
              <!-- Github -->
              <li class="dropdown">
                <a
                  href="https://github.com/auto-wcag/auto-wcag.git"
                  role="link">
                  <i class="fab fa-github scale-2x"></i>
                </a>
              </li>
            </ul>
          </div>
          <!--/.nav-collapse -->
        </div>
      </nav>

      <!-- Begin page content -->
      <main class="container">
        
        <div class="page-header"><h1>Identifying Data Tables</h1></div>
        
        <p>
<h4><b><i>Key: is-data-table</i></b></h4>

<hr>


<h2 id="identifying-tables-in-quailjs">Identifying Tables in QuailJS</h2>

<p><em>Note</em>: This script is written by Kevin Miller and code is under MIT license.
Most of this is informed by an academic paper (http://www2002.org/CDROM/refereed/199/). Note that these tests are ordered by ease of computation to speed things up, if a test says something is a layout table, we stop there. This is all encompassed in the quail.isDataTable method.</p>

<h3 id="number-of-rows">Number of rows</h3>

<p>If there is only one row, this is being used as layout.</p>

<h3 id="nested-tables">Nested tables</h3>

<p>If a table has another table element within it, this is probably a layout table. We do check that there is not a consistent use of child tables throughout the parent table. For example, if every third cell in the table has a table element within it, then this is probably a data table. Essentially, data tables are almost always leaf elements.</p>

<h3 id="appropriate-headers">Appropriate headers</h3>

<p>Next, check if there is an appropriate usage of <code class="highlighter-rouge">th</code> elements. If there is a group of <code class="highlighter-rouge">th</code> elements in a <code class="highlighter-rouge">thead</code> element, and especially if there are <code class="highlighter-rouge">th</code> elements with a scope attribute, then we are assuming the document author was thinking about a data table, and flag this as a data table.</p>

<h3 id="cell-spanning">Cell spanning</h3>

<p>Layout tables almost always have cells spanning different widths, so we convert the table into a matrix representing cell spanning. Column spans are counted up in a given column, and if there are colspans that are not used consistently from row to row, this is a layout table.</p>

<h3 id="cell-consistency">Cell consistency</h3>

<p>Data tables tend to have consistent types of information across columns. We again make a matrix representing the table, and compute the length of content compared to others in the column, and the type of data (HTML, text, number) across the column. Number types are inferred by removing repeated words across columns first, so if a unit is used throughout the column (i.e. “4 feet”), it will be ignored. Types are assigned numeric values of 1 for HTML, 2 for plain text, and 3 for numbers so we can use them with standard deviation.</p>

<p>We take a standard deviation for both content length and content type, then make sure that no cells fall out of that deviation. If more than 10% of all cells lie outside the standard deviation of type and/or content length for a given column, this is flagged as a layout table.</p>

<h2 id="code">Code</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">isDataTable</span> <span class="p">(</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//If there are less than three rows, why do a table?</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">//If you are scoping a table, it's probably not being used for layout</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'th[scope]'</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">numberRows</span> <span class="o">=</span> <span class="nx">table</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'tr:has(td)'</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
  <span class="c1">//Check for odd cell spanning</span>
  <span class="kd">var</span> <span class="nx">spanCells</span> <span class="o">=</span> <span class="nx">table</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'td[rowspan], td[colspan]'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">isDataTable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">spanCells</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">spanIndex</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">spanCells</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">spanIndex</span><span class="p">[</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">index</span><span class="p">()]</span> <span class="o">===</span> <span class="s1">'undefined'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">spanIndex</span><span class="p">[</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">index</span><span class="p">()]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">spanIndex</span><span class="p">[</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">index</span><span class="p">()]</span><span class="o">++</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">spanIndex</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">count</span> <span class="o">&lt;</span> <span class="nx">numberRows</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">isDataTable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="c1">//If there are sub tables, but not in the same column row after row, this is a layout table</span>
  <span class="kd">var</span> <span class="nx">subTables</span> <span class="o">=</span> <span class="nx">table</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'table'</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">subTables</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">subTablesIndexes</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">subTables</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">parentIndex</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">'td'</span><span class="p">).</span><span class="nx">index</span><span class="p">();</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">parentIndex</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">subTablesIndexes</span><span class="p">[</span><span class="nx">parentIndex</span><span class="p">]</span> <span class="o">===</span> <span class="s1">'undefined'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">subTablesIndexes</span><span class="p">[</span><span class="nx">parentIndex</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">subTablesIndexes</span><span class="p">[</span><span class="nx">parentIndex</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">subTablesIndexes</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">count</span> <span class="o">&lt;</span> <span class="nx">numberRows</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">isDataTable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">isDataTable</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>



<!-- DO NOT DELETE BELOW - This is used by a plugin to insert content -->
<!--PLUGIN::APPEND-BACKLINK-TO-RULE-->
<!-- DO NOT DELETE ABOVE - This is used by a plugin to insert content --></p>
      </main>

      <!-- contribute section -->
      <div class="promo-block">
        <div class="container">
          <div class="promo-block-inner">
            <div class="row">
              <div class="figure-holder col-md-4 col-sm-6 col-xs-12">
                <div class="content-holder-inner text-center">
                  <h3 class="promo-title">Contribute</h3>
                  <br />
                  <a
                    href="https://github.com/auto-wcag/auto-wcag.git"
                    role="link"
                    class="desc"
                  >
                    <i class="fab fa-github-square scale-5x"></i>
                  </a>
                  <br /><br /><br /><br />
                  <a
                    class="btn btn-cta"
                    href="https://github.com/auto-wcag/auto-wcag.git"
                  >
                    GitHub
                  </a>
                </div>
              </div>
              <!--//figure-holder-->
              <div class="content-holder col-md-8 col-sm-6 col-xs-12">
                <div class="content-holder-inner">
                  <div class="desc">
                    <p>
                      Contributing is open to anyone. We welcome any
                      new issues or pull requests for changes.
                      Auto WCAG Rules has conference calls every 4 weeks. If
                      you are interested in becoming an active
                      contributor or reviewer, we ask that you join
                      the Auto WCAG Rules community group through the W3C
                      Website. This requires setting up a W3C account,
                      may require approval by the organization you
                      work for if they are a W3C member.
                    </p>
                    <a
                      class="btn btn-cta"
                      href="/pages/contribute.html"
                      >Learn more about contributing to Auto WCAG Rules</a
                    >
                    <a
                      class="btn btn-cta"
                      href="https://www.w3.org/community/wp-login.php?redirect_to=%2Fcommunity%2Fauto-wcag%2Fjoin"
                      >Join the Auto WCAG Rules community group now!</a
                    >
                  </div>
                  <!--//desc-->
                </div>
                <!--//content-holder-inner-->
              </div>
              <!--//content-holder-->
            </div>
          </div>
        </div>
      </div>

      <footer class="footer">
        <div class="container">
          <small>
            Auto WCAG Rules |
            <a class="right" href="/license.html"
              >License</a
            >
          </small>
        </div>
      </footer>
    </div>
  </body>
</html>
